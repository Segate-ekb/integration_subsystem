---
outline: deep
---

# API Reference

Справочник по объектам метаданных подсистемы интеграции.

## Структура подсистемы

```
Подсистема интеграции
├── Справочники (конфигурация)
│   ├── инт_ПотокиДанных
│   ├── инт_Подписчики
│   ├── инт_ПодписчикиHTTP
│   ├── инт_ПодписчикиRabbitMQ
│   ├── инт_ПодписчикиKafka
│   ├── инт_ПодписчикиJRPC
│   ├── инт_ПодписчикиПодсистемаИнтеграции
│   ├── инт_Схемы
│   └── инт_Эндпоинты
│
├── Регистры сведений (данные)
│   ├── инт_ОчередьИсходящихСообщений
│   ├── инт_ОчередьВходящихСообщений
│   ├── инт_ОчередьОтправкиИсходящихСообщений
│   ├── инт_ТекущийСтатусИсходящихСообщений
│   ├── инт_ТекущийСтатусВходящихСообщений
│   ├── инт_ТекущийСтатусРассылкиСообщений
│   ├── инт_ИсторияСтатусовИсходящихСообщений
│   ├── инт_ИсторияСтатусовВходящихСообщений
│   ├── инт_ИсторияСтатусовРассылкиСообщений
│   ├── инт_МенеджерПотоковФормированияСообщений
│   ├── инт_МенеджерПотоковОтправкиСообщений
│   ├── инт_ХешиОбъектов
│   ├── инт_ИдентификаторыВнешнихСистем
│   └── инт_КэшированиеСхемOpenApi
│
├── Общие модули (логика)
│   ├── инт_ФормированиеИсходящихСообщений
│   ├── инт_ОтправкаИсходящихСообщений
│   ├── инт_ОбработкаВходящихПотоков
│   ├── инт_ВалидаторПакетов
│   ├── инт_КоннекторHTTP
│   ├── инт_ПодписчикиОбщий
│   ├── инт_РаботаССообщениямиПроизвольныйHTTP
│   ├── инт_РаботаССообщениямиRabbitMQ
│   ├── инт_РаботаССообщениямиKafka
│   └── инт_РаботаССообщениямиJRPC2
│
├── Перечисления
│   ├── инт_НаправлениеПотокаДанных
│   ├── инт_СтатусыИсходящихСообщений
│   ├── инт_СтатусыВходящихСообщений
│   ├── инт_СтатусыРассылкиИсходящихСообщений
│   ├── инт_ТипыПодписчиков
│   └── инт_ТипыАвторизации
│
├── Регламентные задания
│   ├── инт_МенеджерПотоковФормированияИсходящихСообщений
│   ├── инт_МенеджерПотоковРассылкиСообщений
│   ├── инт_ОбработкаВходящейОчереди
│   └── инт_ОчисткаУстаревшихСообщений
│
└── HTTP-сервисы
    └── prometheus (экспорт метрик)
```

## Ключевые объекты

### Справочники

| Объект | Описание |
|--------|----------|
| `инт_ПотокиДанных` | Потоки данных с обработчиками |
| `инт_Подписчики` | Базовый справочник подписчиков |
| `инт_Схемы` | OpenAPI-схемы для валидации |
| `инт_Эндпоинты` | Настройки подключения |

### Регистры сведений

| Объект | Описание |
|--------|----------|
| `инт_ОчередьИсходящихСообщений` | Очередь исходящих сообщений |
| `инт_ОчередьВходящихСообщений` | Очередь входящих сообщений |
| `инт_ТекущийСтатусИсходящихСообщений` | Текущие статусы |

### Общие модули

| Модуль | Описание |
|--------|----------|
| `инт_ВалидаторПакетов` | Валидация по OpenAPI |
| `инт_ФормированиеИсходящихСообщений` | Формирование сообщений |
| `инт_ОтправкаИсходящихСообщений` | Отправка сообщений |

## Быстрые ссылки

### Регистрация сообщения

```bsl
РегистрыСведений.инт_ОчередьИсходящихСообщений.ЗарегистрироватьСообщение(
    ИсходныеДанные,
    ПотокДанных,
    РегистрироватьДубль
)
```

### Валидация

```bsl
МассивОшибок = инт_ВалидаторПакетов.Валидировать(
    МодельДанных,
    ИмяСхемы,
    ТекстСхемыJSON
)
```

### Получение потока по коду

```bsl
ПотокДанных = Справочники.инт_ПотокиДанных.ПолучитьПотокПоИдентификатору(
    "ORDER_EXPORT",
    НаправлениеПотока
)
```

## Перечисления

### инт_НаправлениеПотокаДанных

| Значение | Описание |
|----------|----------|
| `Исходящий` | Отправка данных из 1С |
| `Входящий` | Приём данных в 1С |

### инт_СтатусыИсходящихСообщений

| Значение | Описание |
|----------|----------|
| `Новый` | Зарегистрировано |
| `ФормированиеСообщения` | Формируется |
| `ОшибкаФормирования` | Ошибка обработчика |
| `ГотовоКОтправке` | Сформировано |
| `ПомещеноВОчередьОтправки` | В очереди рассылки |
| `Отправлено` | Успешно отправлено |
| `ОшибкаОтправки` | Ошибка отправки |

### инт_ТипыПодписчиков

| Значение | Описание |
|----------|----------|
| `HTTP` | Произвольный HTTP |
| `ПодсистемаИнтеграции` | Межбазовый обмен |
| `RabbitMQ` | AMQP брокер |
| `Kafka` | Apache Kafka |
| `JRPC` | JSON-RPC 2.0 |

## Типы данных

### ОпределяемыйТип.инт_ИсходныеДанные

Типы, которые могут быть исходными данными для сообщений:

```
Тип = ДокументСсылка.*
    | СправочникСсылка.*
    | ФиксированнаяСтруктура
```

Настраивается в конфигураторе для конкретной конфигурации.

## Примеры использования

### Полный цикл отправки

```bsl
// 1. Регистрация
ИдСообщения = РегистрыСведений.инт_ОчередьИсходящихСообщений
    .ЗарегистрироватьСообщение(ДокументСсылка, ПотокДанных);

// 2. Формирование (обычно автоматически)
РегистрыСведений.инт_ОчередьИсходящихСообщений
    .СформироватьСообщениеПоИдентификатору(ИдСообщения);

// 3. Регистрация к отправке
РегистрыСведений.инт_ОчередьИсходящихСообщений
    .ЗарегистрироватьСообщениеКОтправке(ИдСообщения);

// 4. Отправка (обычно автоматически через регл. задание)
```

### Получение данных сообщения

```bsl
ДанныеСообщения = РегистрыСведений.инт_ОчередьИсходящихСообщений
    .ПолучитьДанныеОчередиПоИдентификатору(
        ИдентификаторСообщения,
        "ИсходныеДанные, ПотокДанных, СформированноеСообщение"
    );
```

### Удаление сообщения

```bsl
РегистрыСведений.инт_ОчередьИсходящихСообщений
    .УдалитьСообщениеИзОчередиПоИдентификатору(ИдентификаторСообщения);
```

## См. также

- [Концепции: Очереди сообщений](/concepts/message-queues)
- [Концепции: Валидация](/concepts/validation)
- [Руководство: Создание потока](/guide/create-flow)
