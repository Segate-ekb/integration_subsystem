////////////////////////////////////////////////////////////////////////////////
// инт_ГенераторОбработокПовтИсп
//
// Кэширование значений модуля генерации обработок (EPF).
// Повторное использование возвращаемых значений: В течение сеанса.
//
// EPF подключается один раз и остаётся в памяти сеанса.
// ПовтМодуль кэширует имя подключённой обработки,
// повторные вызовы Создать() работают без накладных расходов.
//
////////////////////////////////////////////////////////////////////////////////

#Область СлужебныйПрограммныйИнтерфейс

// Функция - Имя обработки потока данных
// Подключает EPF обработчика потока и возвращает имя подключённой обработки.
// Если EPF отсутствует в БД — компилирует из текста.
// Результат кэшируется в течение сеанса (ПовтИсп).
//
// Параметры:
//  ПотокДанных - СправочникСсылка.инт_ПотокиДанных - Ссылка на поток данных.
//
// Возвращаемое значение:
//  Строка - Имя подключённой обработки. Пустая строка, если обработчик не задан.
//
Функция ИмяОбработкиПотока(Знач ПотокДанных) Экспорт
	
	Если ПотокДанных.Пустая() Тогда
		Возврат "";
	КонецЕсли;
	
	ТекстОбработчика = ПотокДанных.ТекстОбработчика;
	Если Не ЗначениеЗаполнено(ТекстОбработчика) Тогда
		Возврат "";
	КонецЕсли;
	
	ДвоичныеДанныеИзБД = ПотокДанных.СкомпилированныйОбработчик.Получить();
	ДвоичныеДанныеEPF = инт_ГенераторОбработок.РазрешитьEPF(ТекстОбработчика, ДвоичныеДанныеИзБД);
	
	Возврат инт_ГенераторОбработок.ПодключитьОбработку(ДвоичныеДанныеEPF);
	
КонецФункции

#КонецОбласти
