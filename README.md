# –ü–æ–¥—Å–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

[![–°—Ç–∞—Ç—É—Å –ø–æ—Ä–æ–≥–∞ –∫–∞—á–µ—Å—Ç–≤–∞](https://sonar.1cdevelopers.ru/api/project_badges/measure?project=integration_subsystem&metric=alert_status&token=sqb_4fd736b1dca04cda6252313b25beafd7fb501a90)](https://sonar.1cdevelopers.ru/dashboard?id=integration_subsystem)

> üìö **[–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://integration-subsystem-docs.1cdevelopers.ru)** ‚Äî –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ, –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–æ–¥—Å–∏—Å—Ç–µ–º—ã.

–ü–æ–¥—Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–æ–≤—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –≤ 1–°:–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ 8.3.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîÑ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö** ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å –≤—Ö–æ–¥—è—â–∏—Ö –∏ –∏—Å—Ö–æ–¥—è—â–∏—Ö –ø–æ—Ç–æ–∫–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–±–ª—é–¥–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (OpenAPI 3.0) –ø—Ä–∏ –ø—Ä–∏—ë–º–µ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Prometheus** ‚Äî —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–¥—Å–∏—Å—Ç–µ–º—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚ö° **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å** ‚Äî —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- üîå **–ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤** ‚Äî HTTP, RabbitMQ, Kafka, JRPC 2.0
- üõ† **–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏** ‚Äî –≥–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- üìù **–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ** ‚Äî –ø—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

–û–≥–ª–∞–≤–ª–µ–Ω–∏–µ:

<!-- TOC -->

## –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∏ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

## –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö



## –ü–æ–¥–ø–∏—Å—á–∏–∫–∏

–ö–∞–∂–¥—ã–π –∏—Å—Ö–æ–¥—è—â–∏–π –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –æ–±–ª–∞–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º–∏. –ü–æ–¥–ø–∏—Å—á–∏–∫–∏ ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –ø–æ—Ç–æ–∫–∞.

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–¥–∞–Ω—ã —Å–≤–æ–∏ –ø—Ä–∞–≤–∏–ª–∞ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤:

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| **HTTP** | –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π HTTP-–ø–æ–¥–ø–∏—Å—á–∏–∫ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –∏ –º–µ—Ç–æ–¥–∞–º–∏ |
| **–ü–æ–¥—Å–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –±–∞–∑–æ–π —á–µ—Ä–µ–∑ —ç—Ç—É –∂–µ –ø–æ–¥—Å–∏—Å—Ç–µ–º—É |
| **RabbitMQ** | –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ—á–µ—Ä–µ–¥—å RabbitMQ (AMQP) |
| **Kafka** | –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ç–æ–ø–∏–∫–∏ Apache Kafka |
| **JRPC 2.0** | –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É JSON-RPC 2.0 |

### –ü–æ—Å—Ç-–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤

  –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–≤–µ—Ç–æ–≤. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–≤–µ—Ç–æ–≤ - —ç—Ç–æ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è.
  –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω –æ—Ç–≤–µ—Ç –æ—Ç –ø–æ–¥–ø–∏—Å—á–∏–∫–∞, –∞ —Ç–∞–∫ –∂–µ —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.

## –í–∞–ª–∏–¥–∞—Ü–∏—è

–í –ø–æ–¥—Å–∏—Å—Ç–µ–º–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ö–∞–Ω–∏–∑–º –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ –ø—Ä–∏—ë–º–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ **OpenAPI 3.0**.

- **–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ `–∏–Ω—Ç_–°—Ö–µ–º—ã`** ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ö–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ö–µ–º –∏–∑ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- **–í–∞–ª–∏–¥–∞—Ü–∏—è payload** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü–æ–¥—Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Prometheus —á–µ—Ä–µ–∑ HTTP-—Å–µ—Ä–≤–∏—Å:

```
GET /integration_subsystem/hs/prometheus/polling
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `pde_queue_length` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ—á–µ—Ä–µ–¥–∏ (–ø–æ –∫–∞–∂–¥–æ–π –æ—á–µ—Ä–µ–¥–∏ –æ—Ç–¥–µ–ª—å–Ω–æ) |
| `pde_messages_sent_total` | –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π |
| `pde_messages_failed_total` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –æ—à–∏–±–∫–∞–º–∏ |
| `pde_processing_duration_seconds` | –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π |

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –°–æ–∑–¥–∞–Ω–∏–µ –∏—Å—Ö–æ–¥—è—â–µ–≥–æ –ø–æ—Ç–æ–∫–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ `–∏–Ω—Ç_–ü–æ—Ç–æ–∫–∏–î–∞–Ω–Ω—ã—Ö`
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –º–æ–º–µ–Ω—Ç—ã —Ç—Ä–∏–≥–≥–µ—Ä–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
3. –î–æ–±–∞–≤—å—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –æ—á–µ—Ä–µ–¥–∏:

```bsl
–†–µ–≥–∏—Å—Ç—Ä—ã–°–≤–µ–¥–µ–Ω–∏–π.–∏–Ω—Ç_–û—á–µ—Ä–µ–¥—å–ò—Å—Ö–æ–¥—è—â–∏—Ö–°–æ–æ–±—â–µ–Ω–∏–π.–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å–°–æ–æ–±—â–µ–Ω–∏–µ(
    –ò—Å—Ö–æ–¥–Ω—ã–µ–î–∞–Ω–Ω—ã–µ,  // –°—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç –∏–ª–∏ –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è–°—Ç—Ä—É–∫—Ç—É—Ä–∞
    –ü–æ—Ç–æ–∫–î–∞–Ω–Ω—ã—Ö      // –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–°—Å—ã–ª–∫–∞.–∏–Ω—Ç_–ü–æ—Ç–æ–∫–∏–î–∞–Ω–Ω—ã—Ö
);
```

4. –í —Ä–µ–∂–∏–º–µ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞ (–ò—Å—Ö–æ–¥—è—â–∏–π) –∏ —Ç–µ–∫—Å—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
5. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –≤ —Ç–∞–±–ª–∏—á–Ω—É—é —á–∞—Å—Ç—å

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://integration-subsystem-docs.1cdevelopers.ru/guide/create-flow).

## Roadmap

- [x] ~~–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Prometheus)~~
- [x] ~~–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ JRPC 2.0~~
- [x] ~~–ü–æ–¥–¥–µ—Ä–∂–∫–∞ RabbitMQ (AMQP)~~
- [x] ~~–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Apache Kafka~~
- [ ] –ü—Ä–∏—ë–º —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤
- [ ] –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –ø–æ—Ç–æ–∫–æ–≤ –≤ Git
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ AsyncAPI –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
- [ ] –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è –ø–æ –ø–æ—Ç–æ–∫–∞–º
- [ ] –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ –ø–æ –ø–æ–ª—è–º –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ —Å—Ö–µ–º—ã –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

## –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –ø–æ–¥—Å–∏—Å—Ç–µ–º—ã –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ [CONTRIBUTING.md](CONTRIBUTING.md).

## –°—Å—ã–ª–∫–∏

- üìö [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://integration-subsystem-docs.1cdevelopers.ru)
- üìä [SonarQube](https://sonar.1cdevelopers.ru/dashboard?id=integration_subsystem)
- üêõ [Issues](https://github.com/Segate-ekb/integration_subsystem/issues)

## –õ–∏—Ü–µ–Ω–∑–∏—è
